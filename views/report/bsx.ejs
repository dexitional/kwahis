<!DOCTYPE>
<html lang="en">
<head>
    <title>STUDENT BILL</title>
    <link href="http://www.allfont.de/allfont.css?fonts=arial-narrow" rel="stylesheet" type="text/css" />
    <style type="text/css" >
       body{
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            font-weight:normal;
            font-size:13px; 
            background-color:#eee;  
            letter-spacing:0.093em;            
          }

         h2,h3,h4,h5,h6,b{color: <%- settings.loginColor; %>}

        header{
            background:<%- settings.loginColor; %>;
            padding:10px 15px;
            display:flex;
            border-radius:15px 15px 0 0;
        }

        .logo{
          height:80px;
          width:80px;
          border-radius:10px;
          padding:5px;
          background-color:white;
        }


        .photo{
          height:70px;
         
        }

        .cover{
            width: 920px;             
            margin: 10px auto;  
            box-shadow:2px 2px 4px #999;             
            background:#fff;  
            page-break-after:always;  
            border-radius:15px; 
            padding-bottom:20px;     
        }

        .title{
            text-align: left;  
            color:<%- settings.accentColor %>;
            font-size:28px;
            letter-spacing:0.15em;
            width:80%;
            padding:20px;
            margin:0px auto;                                                               
        }

        h1.title span{
            font-family:Verdana, Geneva, Tahoma, sans-serif;
            font-weight:100;
            color:#fff;
        }

        .subcover{
        clear:both;  
        text-align:center;   
        }

        .s-item{
            float:left;
            margin-right:6.2%;
            margin-left:7.2%;
            color:<%- settings.accentColor %>;
            font-size:16px;
        }

        .s-item b{
            color:#ccc;
        }


        content{
            font-family:'Arial Narrow', Arial, sans-serif;
            font-size: 17px;
            display:block;              
            clear:both;
            overflow:hidden;
            padding:10px 50px;
        }        


        .owner{
            font-weight:tahoma,helvetica;
            clear:both;
            overflow:hidden;
            padding:5px 0px;  
            line-height:5px;            
        }

        .owner small{
            font-size:12px;
            font-weight:bold;
        }

        .owner p{
            font-size:12px;  
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif          
        }

        .ch1{
            float:left;
        }
        .ch2{
            float:right;
            direction:rtl;
        }

        .content{
            clear:both;
            overflow:hidden;              
        }

        .sub-footer{
            clear:both;
        }

        .ftleft{
            float:left;
        }

        .ftright{
            float:left;
        }




        footer{
            margin:80px 0 10px;
            font-size:10px;
            font-family:cursive;
            font-style:italic;
        }

        .heading{
            text-align:center;
            text-decoration : underline;
        }

        .table{
            width:800px;             
            border-collapse: collapse;              
            padding: 20px;
            vertical-align:middle;
            text-align:center;  
            border:1px solid <%- settings.loginColor %>;                       
        }

        .table1{
            width:800px;             
            border-collapse: collapse;              
            padding: 20px;
            vertical-align:middle;
            text-align:center;   
            font-weight:bolder;                      
        }

        .tablex{
            width:800px;   
            margin-top:70px;          
            border-collapse: collapse;            
            vertical-align:middle;  
            font-size:13px; 
            line-height:18px;                     
        }


        table,tr,td{
            border-collapse: collapse;
        }

        .table tr td{
            border-bottom: 1px solid #ccc;  
            line-height:10px;           
        }

        .table tr:first-child td{
            font-weight:bolder;
            border-bottom: 4px solid <%- settings.loginColor %>;  
            border-top: 6px solid <%- settings.accentColor %>;              
            border-left:none;
            border-right:none;                  
        }

        .table tr:last-child td{
            font-weight:bolder;
            border-bottom: 6px solid <%- settings.accentColor %>;
            border-top: 4px solid #000;   
            border-left:none;
            border-right:none;                  
        }

        .table td{
            padding: 20px 10px;            
        }

            
        .sbody{
            font-weight:600;
            font-size:11px;
            text-transform:uppercase;
            display:inline-block;
        }


        @media print {
          body{
              background:#fff;
              border:none;
          }

          .cover{
              background:#fff;
              border:thin solid #999;
              box-shadow:none;
              border-radius:0;
             
          }

          header{border-radius:0}
        }

    </style>
</head>
<body>
<%  data.map(rec => { %>
   
    <div class="cover">
          <header>
            <h2 class="title" style="padding:0;font-size:23px;">
                STUDENT <span>BILL</span> : <%- rec.bill.name %> ACADEMIC YEAR, TERM <%- rec.bill.term %>
            </h2>
          </header>  
          <content>                        
              <div class="content">
                  <div class="owner">
                        <div class="ch1">
                            <img src="<%- settings.logo; %>" class="logo">&nbsp;
                        </div>
                        <div class="ch1">
                            <h3><%- settings.instituteLong; %></h3><br>
                            <p><b>A: </b><%- settings.instituteAddress; %></p>
                            <p><b>P: </b><%- settings.institutePhones; %></p>
                            <p><b>E: </b><%- settings.instituteEmail; %>, <%- settings.instituteWeb; %></p><br><br>
                            <b><small style="color:<%- settings.primaryColor; %>;font-weight:bolder;"><%- "CLASS: "+rec.level+" "+rec.program %></small></b>
                        </div>
                        <div class="ch2"><% var gp = rec.bill.content != null ? rec.bill.content.split(',') : '';%>
                            <b><small><%- (rec.fname+' '+rec.lname).toUpperCase() %></small></b>
                            <h1><%- rec.index_number %></h1>
                           
                            <% if(rec.photo == null){ %>
                                <img src="/public/none.png" class="stdphoto" style="width:50px;box-shadow:0px 0px 2px #666;padding:5px;float:right;margin:0 5px 5px 0;"/>
                                <% }else{%>
                                <img src="<%- rec.photo;%>" class="stdphoto" style="width:50px;height:66px;box-shadow:0px 0px 2px #666;padding:5px;float:right;margin:0 5px 5px 0;"/>
                                <% }%>
                        </div>
                      
                        
                           
                  </div>

               
                  <table class="table">  
                      <tr style="background:<%- settings.accentColor %>;color:<%- settings.loginColor %>;border:2px solid brown">
                            <td style="text-align:left;">ITEM DETAILS</td>                           
                            <td style="text-align:right;">AMOUNT</td>
                      </tr> 
                  <%   
                    var sum = 0;
                    if(rec.bill.content != null){                        
                         rec.bill.content.split(';').map((row)=>{
                             let no = row.split(':');
                             sum += parseInt(no[1].trim());
                  %>
                      <tr>                            
                            <td style="text-align:left;"><small><b><%- no[0].toUpperCase(); %></b></small></td>
                            <td align="right">
                                <b><%- '&#8373 '+no[1];%></b>
                            </td>
                      </tr> 
                 <%
                         })
                     }
                 %> 

                    <tr style="background:<%- settings.secondColor %>">
                            <td align="left"><small>
                                <b>BILLED TO : </b> <span><%- (rec.fname+' '+rec.lname).toUpperCase() %> ( <%- rec.index_number %> )</span>
                            </small>
                            </td>                           
                            <td align="right"> </td>
                    </tr>
                     
                    </table>
                    <!-- Total Amount -->
                    <table class="table1">
                        <tr>
                            <td align="left"><h3>TOTAL BALANCE</h3></td><td colspan="4"></td>&nbsp;<td align="right"><h2>&#8373 <%- sum %></h2></td>
                        </tr>
                    </table>
                    
                   <br><hr>
                  
              </div> 
                                
          </content>              
    </div>
    <% }) %>
</body>
</html>